!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GeopackageManager",[],t):"object"==typeof exports?exports.GeopackageManager=t():e.GeopackageManager=t()}(window,function(){return function(e){function t(t){for(var n,u,o=t[0],i=t[1],s=t[2],c=0,f=[];c<o.length;c++)u=o[c],l[u]&&f.push(l[u][0]),l[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(d&&d(t);f.length;)f.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==l[i]&&(n=!1)}n&&(r.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},l={1:0},r=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/static/data_manager/dist/";var o=window.webpackJsonp_name_=window.webpackJsonp_name_||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var d=i;return r.push(["7xdy",0]),a()}({"7cd4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a("Yz+Y")),l=b(a("iCc5")),r=b(a("V7oC")),u=b(a("FYw3")),o=b(a("mRg0")),i=b(a("1OZW")),s=b(a("DKSo")),d=b(a("0G56")),c=b(a("Sk/v")),f=b(a("SNP2")),p=b(a("/xgX")),m=b(a("C+zi")),h=b(a("17x9")),g=b(a("q1tI")),y=b(a("ZqOF")),E=b(a("6ZaM")),v=a("SUMQ");function b(e){return e&&e.__esModule?e:{default:e}}var L=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.publishLayer,a=e.publishModalOpen,n=e.handlPublishModal,l=e.publishLoading,r=e.classes,u=e.publishName,o=e.handlePublishName,h=e.publishError;return g.default.createElement(d.default,{disableBackdropClick:!0,open:a,onClose:n,"aria-labelledby":"form-dialog-title"},g.default.createElement(m.default,{id:"form-dialog-title"},"Publish Layer"),g.default.createElement(f.default,null,g.default.createElement(p.default,null,h&&g.default.createElement(E.default,{className:r.flexGrow,noWrap:!0,color:"secondary",variant:"subheading"},h),"Please Enter Name You Want to publish Layer With."),g.default.createElement(y.default,{inputProps:{maxLength:63},autoFocus:!0,value:u,onChange:o,margin:"dense",id:"name",label:"Publish Name",fullWidth:!0,required:!0})),g.default.createElement(c.default,null,l&&g.default.createElement(s.default,{className:r.progress,thickness:7}),g.default.createElement(i.default,{disabled:l,onClick:n,color:"primary"},"Cancel"),g.default.createElement(i.default,{disabled:l,onClick:t,color:"primary"},"Publish")))}}]),t}(g.default.Component);L.propTypes={classes:h.default.object.isRequired,publishLayer:h.default.func.isRequired,handlPublishModal:h.default.func.isRequired,handlePublishName:h.default.func.isRequired,publishModalOpen:h.default.bool.isRequired,publishLoading:h.default.bool.isRequired,publishName:h.default.string,publishError:h.default.string},t.default=(0,v.withStyles)(function(e){return{flexGrow:{flexGrow:1},progress:{margin:2*e.spacing.unit}}})(L)},"7xdy":function(e,t,a){"use strict";(function(e){var t=U(a("Yz+Y")),n=U(a("iCc5")),l=U(a("V7oC")),r=U(a("FYw3")),u=U(a("mRg0")),o=U(a("YEIV")),i=U(a("QbLZ"));a("bZMm"),a("201c"),a("RQfP");var s=a("q1tI"),d=U(s),c=a("tF6y"),f=a("9Em9"),p=a("vu7d"),m=U(a("uctU")),h=U(a("yzbm")),g=U(a("DrhM")),y=U(a("vrOF")),E=U(a("Nlzp")),v=U(a("1IiC")),b=U(a("JgXy")),L=U(a("WqRt")),S=a("SUMQ"),_=U(a("pPbJ")),w=U(a("17x9")),M=a("/MKj"),O=U(a("6ZaM")),R=U(a("ixGs")),x=U(a("TSYQ")),P=a("i8i4"),k=a("Q2AE"),C=a("AiFK");function U(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function a(e){(0,n.default)(this,a);var l=(0,r.default)(this,(a.__proto__||(0,t.default)(a)).call(this,e));l.onDrop=function(e){l.setState({files:e})},l.removeUploadedFile=function(e){var t=l.state.files.filter(function(t){return t!==e});l.setState({files:t})};var u=l.props,o=u.token,i=u.username,s=u.urls;return l.state={files:[]},l.geopackageApi=new E.default(i,o,s),l.requests=new p.ApiRequests(i,l.token),l}return(0,u.default)(a,e),(0,l.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setUploads,a=e.setUploadsLoading,n=e.setTotalCount,l=e.setPermissions,r=e.setPermissionsLoading;this.geopackageApi.getUploads().then(function(e){t(e.objects),n(e.meta.total_count),a(!1)}),this.geopackageApi.getPermissions().then(function(e){l(e),r(!1)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.uploads,l=t.uploadsLoading,r=this.state.files;return d.default.createElement(S.MuiThemeProvider,{theme:C.theme},d.default.createElement("div",{className:a.fullHeight},d.default.createElement(m.default,{title:"GIS Data Import Manager"}),d.default.createElement(_.default,{className:(0,x.default)([a.root])},d.default.createElement(_.default,{elevation:2},d.default.createElement(h.default,{className:a.dropZone,accept:".gpkg",onDrop:this.onDrop},d.default.createElement("label",{htmlFor:"icon-button-file"},d.default.createElement(v.default,{color:"default",className:a.button,component:"span"},d.default.createElement(y.default,null))),d.default.createElement(O.default,{variant:"display1",gutterBottom:!0},"Click to Choose Packages or Drop Packages Here to Upload"))),r.length>0&&d.default.createElement(_.default,{className:(0,x.default)([a.fullWidth],[a.uploadPaper]),elevation:2},d.default.createElement(b.default,{className:a.fullWidth,component:"nav",subheader:d.default.createElement(L.default,{component:"div"},"Uploading")},r.map(function(t,a){return d.default.createElement(g.default,{file:t,removeUploadedFile:e.removeUploadedFile,key:a})}))),n.length>0&&!l&&d.default.createElement(R.default,null))))}}]),a}(s.Component);T.propTypes={classes:w.default.object.isRequired,urls:w.default.object.isRequired,username:w.default.string.isRequired,token:w.default.string.isRequired,setUploads:w.default.func.isRequired,uploads:w.default.array.isRequired,uploadsLoading:w.default.bool.isRequired,setUploadsLoading:w.default.func.isRequired,setPermissionsLoading:w.default.func.isRequired,setPermissions:w.default.func.isRequired,setTotalCount:w.default.func.isRequired};var N=(0,M.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls,uploads:e.uploads,uploadsLoading:e.uploadsLoading,permissions:e.permissions,permissionsLoading:e.permissionsLoading,uploadsTotalCount:e.uploadsTotalCount}},function(e){return{setUploadsLoading:function(t){return e((0,c.uploadsLoading)(t))},setUploads:function(t){return e((0,c.newUploads)(t))},setPermissionsLoading:function(t){return e((0,f.permissionsLoading)(t))},setPermissions:function(t){return e((0,f.permissions)(t))},setTotalCount:function(t){return e((0,c.uploadsTotalCount)(t))}}})((0,S.withStyles)(function(e){var t;return{fullHeight:{height:"100%"},fullWidth:{width:"100%"},uploadPaper:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},button:{margin:e.spacing.unit},dropZone:{width:"100%",padding:"1em",flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",textAlign:"center"},root:(0,i.default)((t={height:"calc( 100% - "+e.mixins.toolbar["@media (min-width:600px)"].minHeight+"px)"},(0,o.default)(t,e.breakpoints.down("sm"),{height:"calc( 100% - "+e.mixins.toolbar["@media (min-width:0px) and (orientation: landscape)"].minHeight+"px)"}),(0,o.default)(t,"boxSizing","border-box"),t),e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,overflowX:"scroll",zIndex:0,background:"#f3f3f3"})}})(T));e.GeopackageManagerRenderer={show:function(e,t){(0,P.render)(d.default.createElement(M.Provider,{store:(0,k.storeWithInitial)(t)},d.default.createElement(N,null)),document.getElementById(e))}}}).call(this,a("yLpj"))},"9Em9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.permissions=function(e){return{type:n.SET_PERMISSIONS,payload:e}},t.updatePermissions=function(e,t,a){return{type:n.UPDATE_PERMISSIONS,payload:{keys:e,id:t,operation:a}}},t.permissionsLoading=function(e){return{type:n.PERMISSIONS_LOADING,payload:e}};var n=a("TUL1")},AiFK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var n=o(a("vqLa")),l=a("SUMQ"),r=o(a("wokB")),u=o(a("fWIC"));function o(e){return e&&e.__esModule?e:{default:e}}t.theme=(0,l.createMuiTheme)({palette:{primary:n.default,secondary:u.default,error:r.default}})},DrhM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a("GQeE")),l=S(a("Yz+Y")),r=S(a("iCc5")),u=S(a("V7oC")),o=S(a("FYw3")),i=S(a("mRg0")),s=a("q1tI"),d=S(s),c=a("TUL1"),f=a("vu7d"),p=S(a("QGGi")),m=S(a("vrOF")),h=S(a("NABS")),g=S(a("4eE1")),y=S(a("17x9")),E=a("tF6y"),v=a("/MKj"),b=a("9Em9"),L=a("SUMQ");function S(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e)),n=a.props,u=n.username,i=n.token;a.state={progress:0,error:null};var s=i.split(" for ")[0];return a.requests=new f.ApiRequests(u,s),a}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.urls,l=t.file,r=t.addUpload,u=t.updatePermissions,o=t.permissions,i=t.removeUploadedFile,s=new FormData;s.append("package",l),this.requests.uploadWithProgress(a.uploadsURL,s,function(e){},function(t){if(t.lengthComputable){var a=Math.ceil(t.loaded/t.total*100);e.setState({progress:a})}},function(e){201===e.status&&setTimeout(function(){var t=JSON.parse(e.responseText);r(t),u((0,n.default)(o),t.id,c.ADD_PERMISSION_OP),i(l)},1e3)},function(t){t.status>=400&&e.setState({error:t.statusText})})}},{key:"render",value:function(){var e=this.state,t=e.progress,a=e.error,n=this.props.file;return d.default.createElement(h.default,null,d.default.createElement(p.default,null,d.default.createElement(m.default,null)),d.default.createElement(g.default,{primary:n.name,secondary:a||t+"% Complete"}))}}]),t}(s.Component);_.propTypes={file:y.default.object.isRequired,urls:y.default.object.isRequired,username:y.default.string.isRequired,token:y.default.string.isRequired,addUpload:y.default.func.isRequired,updatePermissions:y.default.func.isRequired,permissions:y.default.object.isRequired,removeUploadedFile:y.default.func.isRequired};var w=(0,v.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls,permissions:e.permissions}},function(e){return{addUpload:function(t){return e((0,E.addUpload)(t))},updatePermissions:function(t,a,n){return e((0,b.updatePermissions)(t,a,n))}}})((0,L.withStyles)(function(e){return{}})(_));t.default=w},Eyef:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(a("QbLZ")),l=x(a("Yz+Y")),r=x(a("iCc5")),u=x(a("V7oC")),o=x(a("FYw3")),i=x(a("mRg0")),s=x(a("YEIV")),d=a("vu7d"),c=x(a("1OZW")),f=x(a("1iKp")),p=x(a("aoIh")),m=x(a("VtDg")),h=x(a("7Nn7")),g=x(a("84s+")),y=x(a("17x9")),E=x(a("q1tI")),v=x(a("NeRm")),b=x(a("nzuV")),L=x(a("1TCx")),S=x(a("8+ys")),_=x(a("QUaF")),w=x(a("6ZaM")),M=a("/MKj"),O=a("tF6y"),R=a("SUMQ");function x(e){return e&&e.__esModule?e:{default:e}}var P=(0,R.withStyles)(function(e){return{head:{backgroundColor:e.palette.primary.dark,color:e.palette.common.white},body:{fontSize:14}}})(L.default),k=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.handleDeleted=function(e){var t=a.props,n=t.urls,l=t.deleteOldUpload,r=""+n.uploadsURL+e.id+"/";a.requests.doDelete(r).then(function(t){l(e.id)})};var n=a.props,u=n.token,i=n.username,s=u.split(" for ")[0];return a.requests=new d.ApiRequests(i,s),a}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,l=t.upload,r=t.permissions,u=t.setCurrentLayerOpenPublishModal,o=t.setCurrentLayerOpenUpdateModal;return E.default.createElement(p.default,{defaultExpanded:!0},E.default.createElement(g.default,{classes:{content:a.panelSummary},expandIcon:E.default.createElement(f.default,null)},E.default.createElement(w.default,{className:a.flexGrow,noWrap:!0,variant:"subheading"},l.package.split("/").pop()),E.default.createElement(w.default,{className:a.flexGrow,noWrap:!0,variant:"subheading"},"Uploaded At: "+new Date(l.uploaded_at).toLocaleString()),E.default.createElement("div",null,E.default.createElement(w.default,{className:a.flexGrow,noWrap:!0,variant:"subheading"},"Owner: "+l.user.username))),E.default.createElement(h.default,null,E.default.createElement("div",{className:a.tableWrapper},E.default.createElement(v.default,{className:a.table},E.default.createElement(S.default,null,E.default.createElement(_.default,null,E.default.createElement(P,{className:a.textCenter},"Layer Name"),E.default.createElement(P,{className:a.textCenter},"Layer Type"),E.default.createElement(P,{className:a.textCenter},"Feature Count"),E.default.createElement(P,{className:a.textCenter},"Actions"))),E.default.createElement(b.default,null,l.layers.map(function(e,t){return E.default.createElement(_.default,{className:a.row,key:t},E.default.createElement(L.default,{className:a.textCenter,component:"th",scope:"row"},E.default.createElement(w.default,{noWrap:!0,variat:"body2"},e.name)),E.default.createElement(L.default,{className:a.textCenter,component:"th",scope:"row"},E.default.createElement(w.default,{noWrap:!0,variat:"body2"},e.geometry_type_name)),E.default.createElement(L.default,{className:a.textCenter,component:"th",scope:"row"},E.default.createElement(w.default,{noWrap:!0,variat:"body2"},e.feature_count)),E.default.createElement(L.default,{className:a.textCenter,component:"th",scope:"row"},(0,d.checkPermission)(r,"publish_from_package",l.id)&&E.default.createElement(c.default,{onClick:function(){return u(e)},variant:"contained",color:"primary",className:a.button},"Publish New"),(0,d.checkPermission)(r,"publish_from_package",l.id)&&E.default.createElement(c.default,{variant:"contained",onClick:function(){return o((0,n.default)({},e,{upload_id:l.id}))},color:"secondary",className:a.button},"Update Existing")))}))))),E.default.createElement(m.default,null,(0,d.checkPermission)(r,"download_package",l.id)&&E.default.createElement(c.default,{component:"a",href:l.download_url,size:"small",variant:"outlined",color:"primary",className:a.button},"Download"),(0,d.checkPermission)(r,"delete_package",l.id)&&E.default.createElement(c.default,{onClick:function(){return e.handleDeleted(l)},size:"small",variant:"outlined",color:"secondary",className:a.button},"Delete")))}}]),t}(E.default.Component);k.propTypes={classes:y.default.object.isRequired,deleteOldUpload:y.default.func.isRequired,setCurrentLayerOpenPublishModal:y.default.func.isRequired,setCurrentLayerOpenUpdateModal:y.default.func.isRequired,upload:y.default.object.isRequired,permissions:y.default.object.isRequired,token:y.default.string.isRequired,urls:y.default.object.isRequired,username:y.default.string.isRequired};t.default=(0,M.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls,permissions:e.permissions}},function(e){return{deleteOldUpload:function(t){return e((0,O.deleteUpload)(t))}}})((0,R.withStyles)(function(e){var t;return{root:{width:"100%",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},textCenter:{textAlign:"center"},title:{margin:e.spacing.unit,textAlign:"center"},button:{margin:e.spacing.unit},flexGrow:{flexGrow:1},panelSummary:(t={display:"flex"},(0,s.default)(t,e.breakpoints.down("sm"),{flexDirection:"column",padding:e.spacing.unit}),(0,s.default)(t,"overflow","hidden"),(0,s.default)(t,"alignItems","center"),t),table:{width:"100%"},tableWrapper:{overflowX:"auto",width:"100%"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},progress:{margin:2*e.spacing.unit}}})(k))},M1tY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a("Yz+Y")),l=_(a("iCc5")),r=_(a("V7oC")),u=_(a("FYw3")),o=_(a("mRg0"));a("FkOY");var i=a("vu7d"),s=_(a("1OZW")),d=_(a("DKSo")),c=_(a("0G56")),f=_(a("Sk/v")),p=_(a("SNP2")),m=_(a("/xgX")),h=_(a("C+zi")),g=_(a("17x9")),y=_(a("q1tI")),E=_(a("8Fln")),v=_(a("6ZaM")),b=_(a("TSYQ")),L=a("/MKj"),S=a("SUMQ");function _(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.downloadSelectedLayers=function(){var e=a.props.urls,t=a.state.downlaodLayers.map(function(e){return e.typename.split(":").pop()}),n=e.downloadURL+"?layer_names="+t.join(",");a.setState({downloadModalOpen:!1},function(){a.setState({progressModalOpen:!0},function(){a.requests.doGet(n).then(function(e){e.download_url?a.setState({downloadLoading:!1,downlaodLayers:[]},function(){window.location.href=e.download_url}):a.setState({downloadLoading:!1,downlaodLayers:[],downloadError:e.error_message})}).catch(function(e){a.setState({downloadLoading:!1,downloadError:e.message})})})})},a.handleSelectChange=function(e){a.setState({downlaodLayers:e})},a.state={downlaodLayers:[],downloadError:null,downloadLoading:!1};var r=a.props,o=r.token,s=r.username,d=o.split(" for ")[0];return a.requests=new i.ApiRequests(s,d),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.state,t=e.downloadError,a=e.downloadLoading,n=e.downlaodLayers,l=this.props,r=l.downloadModalOpen,u=l.handleDownloadModal,o=l.classes;return y.default.createElement(c.default,{fullScreen:!0,disableBackdropClick:!0,open:r,onClose:u,"aria-labelledby":"form-dialog-title"},y.default.createElement(h.default,{disableTypography:!0,className:o.dialogTitle}," ",y.default.createElement(v.default,{className:(0,b.default)(o.flexGrow,o.whiteText),noWrap:!0,variant:"title"},"Download Layers")),y.default.createElement(p.default,null,y.default.createElement(m.default,null,t&&y.default.createElement(v.default,{className:o.flexGrow,noWrap:!0,color:"secondary",variant:"subheading"},t)),y.default.createElement(E.default,{closeOnSelect:!1,multi:!0,onChange:this.handleSelectChange,options:downloadableLayers,valueKey:"typename",labelKey:"title",placeholder:"Layers To Download",removeSelected:this.state.removeSelected,value:n})),y.default.createElement(f.default,null,a&&y.default.createElement(d.default,{className:o.progress,thickness:7}),y.default.createElement(s.default,{disabled:a,onClick:u,color:"primary"},"Cancel"),y.default.createElement(s.default,{onClick:this.downloadSelectedLayers,color:"primary"},"Download")))}}]),t}(y.default.Component);w.propTypes={classes:g.default.object.isRequired,token:g.default.string.isRequired,urls:g.default.object.isRequired,username:g.default.string.isRequired,handleDownloadModal:g.default.func.isRequired,downloadModalOpen:g.default.bool.isRequired};t.default=(0,L.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls}},function(e){return{}})((0,S.withStyles)(function(e){return{flexGrow:{flexGrow:1},button:{margin:e.spacing.unit},margin:{margin:e.spacing.unit},textField:{flexBasis:200},progress:{margin:2*e.spacing.unit},fullWidth:{width:"100%"},layerItem:{margin:2*e.spacing.unit,display:"flex",alignItems:"center",justifyContent:"space-between"},dialogTitle:{backgroundColor:e.palette.primary[500],marginBottom:2*e.spacing.unit},whiteText:{color:e.palette.common.white}}})(w))},NDqc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.username=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case n.SET_USERNAME:return t.payload;default:return e}},t.urls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n.SET_URLS:return t.payload;default:return e}},t.token=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case n.SET_TOKEN:return t.payload;default:return e}};var n=a("TUL1")},Nlzp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a("iCc5")),l=o(a("V7oC")),r=a("vu7d"),u=a("X7BR");function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(t,a,l){(0,n.default)(this,e);var u=a.split(" for ")[0];this.requests=new r.ApiRequests(t,u),this.urls=l}return(0,l.default)(e,[{key:"getUploads",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.LIMIT;return this.requests.doGet(this.urls.uploadsURL+"?offset="+e+"&limit="+t)}},{key:"getPermissions",value:function(){return this.requests.doGet(this.urls.permissionsURL)}}]),e}();t.default=i},Q2AE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0,t.storeWithInitial=function(e){return(0,n.configureStore)(e)};var n=a("cXEB");t.store=(0,n.configureStore)()},"R9/I":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a("QbLZ")),l=u(a("m1cH"));t.permissions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case r.SET_PERMISSIONS:return t.payload;case r.UPDATE_PERMISSIONS:return(0,n.default)({},e,function(e,t){var a={};return t.keys.map(function(u){var o=e[u],i=[];switch(t.operation){case r.DELETE_PERMISSION_OP:i=o.ids.filter(function(e){return e!=t.id});break;case r.ADD_PERMISSION_OP:i=[].concat((0,l.default)(o.ids),[t.id]);break;default:throw Error("Invalid Operation on Permission Obj")}o=(0,n.default)({},o,{ids:i}),a[u]=o}),(0,n.default)({},e,a)}(e,t.payload));default:return e}},t.permissionsLoading=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case r.PERMISSIONS_LOADING:return t.payload;default:return e}};var r=a("TUL1");function u(e){return e&&e.__esModule?e:{default:e}}},RQfP:function(e,t){},RlU5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(a("m1cH"));t.uploads=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case l.ADD_UPLOAD:return[t.payload].concat((0,n.default)(e));case l.ADD_UPLOADS:return[].concat((0,n.default)(e),(0,n.default)(t.payload));case l.DELETE_UPLOAD:return e.filter(function(e){return e.id!=t.payload});case l.DELETE_UPLOADS:return e.map(function(e){return!t.payload.includes(e.id)});case l.SET_UPLOADS:return t.payload;default:return e}},t.uploadsLoading=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case l.UPLOADS_LOADING:return t.payload;default:return e}},t.uploadsTotalCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case l.SET_TOTAL_COUNT:return t.payload;default:return e}};var l=a("TUL1")},TUL1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADD_UPLOAD="ADD_UPLOAD",t.ADD_UPLOADS="ADD_UPLOADS",t.DELETE_UPLOAD="DELETE_UPLOAD",t.DELETE_UPLOADS="DELETE_UPLOADS",t.SET_UPLOADS="NEW_UPLOADS",t.UPLOADS_LOADING="UPLOADS_LOADING",t.SET_PERMISSIONS="SET_PERMISSIONS",t.UPDATE_PERMISSIONS="UPDATE_PERMISSIONS",t.PERMISSIONS_LOADING="PERMISSIONS_LOADING",t.SET_TOTAL_COUNT="SET_TOTAL_COUNT",t.SET_URLS="SET_URLS",t.SET_USERNAME="SET_USERNAME",t.SET_TOKEN="SET_TOKEN",t.ADD_PERMISSION_OP="ADD",t.DELETE_PERMISSION_OP="DELETE"},X7BR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIMIT=20},YUIr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=P(a("Yz+Y")),l=P(a("iCc5")),r=P(a("V7oC")),u=P(a("FYw3")),o=P(a("mRg0")),i=a("vu7d"),s=P(a("1OZW")),d=P(a("DKSo")),c=P(a("0G56")),f=P(a("Sk/v")),p=P(a("SNP2")),m=P(a("/xgX")),h=P(a("C+zi")),g=P(a("1DzM")),y=P(a("1IiC")),E=P(a("MwB+")),v=P(a("cUz1")),b=P(a("ctcd")),L=P(a("swsI")),S=P(a("17x9")),_=P(a("q1tI")),w=P(a("bSwy")),M=P(a("6ZaM")),O=P(a("TSYQ")),R=a("/MKj"),x=a("SUMQ");function P(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.handleLayerTitleChange=function(e){a.setState({layerTitle:e.target.value})},a.handleSearch=function(){var e=a.state.layerTitle,t=a.props.urls.layersURL+"?title__icontains="+e+"&permission=change_resourcebase";a.setState({layersLoading:!0},function(){a.requests.doGet(t).then(function(e){a.setState({layers:e.objects,layersLoading:!1})})})},a.state={layerTitle:"",layers:[],layersLoading:!1};var r=a.props,o=r.token,s=r.username,d=o.split(" for ")[0];return a.requests=new i.ApiRequests(s,d),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.state,t=e.layers,a=e.layersLoading,n=this.props,l=n.currentLayer,r=n.updateExistingModalOpen,u=n.handleUpdateExistingModal,o=n.updateExistingLoading,i=n.classes,S=n.updateError;return _.default.createElement(c.default,{fullScreen:!0,disableBackdropClick:!0,open:r,onClose:u,"aria-labelledby":"form-dialog-title"},_.default.createElement(h.default,{disableTypography:!0,className:i.dialogTitle}," ",_.default.createElement(M.default,{className:(0,O.default)(i.flexGrow,i.whiteText),noWrap:!0,variant:"title"},"Update/Replace Layer")),_.default.createElement(p.default,null,_.default.createElement(m.default,null,S&&_.default.createElement(M.default,{className:i.flexGrow,noWrap:!0,color:"secondary",variant:"subheading"},S),"Search For The Layer You Want To Replace/Update By "+(l?l.name:"")),_.default.createElement(g.default,{className:(0,O.default)(i.margin,i.textField,i.fullWidth)},_.default.createElement(b.default,{htmlFor:"layers-search"},"Layer Name/Layer Title"),_.default.createElement(E.default,{id:"layers-search",type:"text",value:this.state.layerTitle,onChange:this.handleLayerTitleChange,endAdornment:_.default.createElement(v.default,{position:"end"},_.default.createElement(y.default,{"aria-label":"Search",onClick:this.handleSearch},_.default.createElement(w.default,null))),require:"true",fullWidth:!0})),!a&&t.length>0&&t.map(function(e){return _.default.createElement(L.default,{key:e.id,currentLayer:l,layer:e})})),_.default.createElement(f.default,null,(o||a)&&_.default.createElement(d.default,{className:i.progress,thickness:7}),_.default.createElement(s.default,{disabled:o||a,onClick:u,color:"primary"},"Cancel")))}}]),t}(_.default.Component);k.propTypes={classes:S.default.object.isRequired,currentLayer:S.default.object,token:S.default.string.isRequired,urls:S.default.object.isRequired,username:S.default.string.isRequired,handleUpdateExistingModal:S.default.func.isRequired,updateExistingModalOpen:S.default.bool.isRequired,updateExistingLoading:S.default.bool.isRequired,updateError:S.default.string};t.default=(0,R.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls}},function(e){return{}})((0,x.withStyles)(function(e){return{flexGrow:{flexGrow:1},button:{margin:e.spacing.unit},margin:{margin:e.spacing.unit},textField:{flexBasis:200},progress:{margin:2*e.spacing.unit},fullWidth:{width:"100%"},layerItem:{margin:2*e.spacing.unit,display:"flex",alignItems:"center",justifyContent:"space-between"},dialogTitle:{backgroundColor:e.palette.primary[500],marginBottom:2*e.spacing.unit},whiteText:{color:e.palette.common.white}}})(k))},cXEB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=function(e){return(0,n.createStore)(l.default,e,(0,n.applyMiddleware)(r.default))};var n=a("ANjH"),l=u(a("cokx")),r=u(a("sINF"));function u(e){return e&&e.__esModule?e:{default:e}}},cokx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("R9/I"),l=a("NDqc"),r=a("RlU5"),u=a("ANjH");t.default=(0,u.combineReducers)({uploads:r.uploads,uploadsLoading:r.uploadsLoading,permissions:n.permissions,permissionsLoading:n.permissionsLoading,uploadsTotalCount:r.uploadsTotalCount,urls:l.urls,username:l.username,token:l.token})},ixGs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a("Yz+Y")),l=E(a("iCc5")),r=E(a("V7oC")),u=E(a("FYw3")),o=E(a("mRg0")),i=a("vu7d"),s=E(a("EHL7")),d=(E(a("pPbJ")),E(a("17x9"))),c=E(a("7cd4")),f=E(a("q1tI")),p=E(a("6ZaM")),m=E(a("YUIr")),h=E(a("Eyef")),g=a("/MKj"),y=a("SUMQ");function E(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.setCurrentLayerOpenPublishModal=function(e){a.setState({currentLayer:e,publishName:e.expected_name},a.handlPublishModal)},a.setCurrentLayerOpenUpdateModal=function(e){a.setState({currentLayer:e},a.handleUpdateExistingModal)},a.handlPublishModal=function(){var e=a.state.publishModalOpen;a.setState({publishModalOpen:!e,publishError:null})},a.handleUpdateExistingModal=function(){var e=a.state.updateExistingModalOpen;a.setState({updateExistingModalOpen:!e,updateError:null})},a.handlePublishName=function(e){a.setState({publishName:(0,i.convertToSlug)(e.target.value)})},a.replaceLayer=function(){},a.publishLayer=function(){var e=a.state,t=e.currentLayer,n=e.publishName;a.setState({publishLoading:!0},function(){a.requests.doGet(t.urls.publish_url+"?publish_name="+n).then(function(e){if(!e.layer_url)throw Error(e.error_message);window.location.href=e.layer_url}).catch(function(e){a.setState({publishLoading:!1,publishError:e.message})})})},a.state={publishModalOpen:!1,publishName:null,currentLayer:null,publishLoading:!1,publishError:null,updateError:null,updateExistingLoading:!1,updateExistingModalOpen:!1};var r=a.props,o=r.token,s=r.username,d=o.split(" for ")[0];return a.requests=new i.ApiRequests(s,d),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.uploads,l=this.state,r=l.publishModalOpen,u=l.publishLoading,o=l.publishError,i=l.publishName,d=l.updateExistingLoading,g=l.updateError,y=l.updateExistingModalOpen,E=l.currentLayer;return f.default.createElement("div",{className:a.root},f.default.createElement(c.default,{handlePublishName:this.handlePublishName,publishLoading:u,publishError:o,publishName:i,handlPublishModal:this.handlPublishModal,publishLayer:this.publishLayer,publishModalOpen:r}),f.default.createElement(m.default,{currentLayer:E,updateExistingLoading:d,updateError:g,handleUpdateExistingModal:this.handleUpdateExistingModal,replaceLayer:this.replaceLayer,updateExistingModalOpen:y}),f.default.createElement(s.default,null),f.default.createElement(p.default,{noWrap:!0,color:"default",className:a.title,variant:"headline"},"Uploaded List"),n&&n.map(function(t,a){return f.default.createElement(h.default,{setCurrentLayerOpenUpdateModal:e.setCurrentLayerOpenUpdateModal,upload:t,setCurrentLayerOpenPublishModal:e.setCurrentLayerOpenPublishModal,key:a})}))}}]),t}(f.default.Component);v.propTypes={classes:d.default.object.isRequired,uploads:d.default.array.isRequired,token:d.default.string.isRequired,urls:d.default.object.isRequired,username:d.default.string.isRequired};t.default=(0,g.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls,uploads:e.uploads}},function(e){return{}})((0,y.withStyles)(function(e){return{root:{width:"100%",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,boxSizing:"border-box",padding:e.spacing.unit},textCenter:{textAlign:"center"},title:{margin:e.spacing.unit,textAlign:"center"},button:{margin:e.spacing.unit},flexGrow:{flexGrow:1},panelSummary:{display:"flex",alignItems:"center"},table:{width:"100%"},tableWrapper:{overflowX:"auto",width:"100%"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},progress:{margin:2*e.spacing.unit}}})(v))},oYDv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a("gDS+")),l=w(a("Yz+Y")),r=w(a("iCc5")),u=w(a("V7oC")),o=w(a("FYw3")),i=w(a("mRg0")),s=a("vu7d"),d=w(a("1OZW")),c=w(a("DKSo")),f=w(a("0G56")),p=w(a("Sk/v")),m=w(a("SNP2")),h=w(a("/xgX")),g=w(a("C+zi")),y=w(a("17x9")),E=w(a("q1tI")),v=w(a("ZqOF")),b=w(a("6ZaM")),L=a("/MKj"),S=w(a("+QwO")),_=a("SUMQ");function w(e){return e&&e.__esModule?e:{default:e}}var M=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.handleLayerURLChange=function(e){a.setState({layerURL:e.target.value})},a.publishArcGISLayer=function(e){var t=a.props.urls,l=a.state.layerURL,r=""+t.esriPublishURL;a.requests.doPost(r,(0,n.default)({layer_url:l}),{"content-type":"application/json"}).then(function(e){e.task_id?a.setState({loading:!1,layerURL:""},alert("We will send an Email When the Layer is Ready")):a.setState({loading:!1,sendURLError:e.error_message})}).catch(function(e){a.setState({loading:!1,sendURLError:e.message})})},a.startPublish=function(){var e=a.state.layerURL;S.default.isURL(e)&&a.setState({loading:!0},a.publishArcGISLayer)},a.state={sendURLError:null,layerURL:"",loading:!1};var u=a.props,i=u.token,d=u.username,c=i.split(" for ")[0];return a.requests=new s.ApiRequests(d,c),a}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state,t=e.layerURL,a=e.loading,n=e.sendURLError,l=this.props,r=l.ArcGISModalOpen,u=l.handleArcGISModal,o=l.classes;return E.default.createElement(f.default,{disableBackdropClick:!0,open:r,onClose:u,"aria-labelledby":"form-dialog-title"},E.default.createElement(g.default,{id:"form-dialog-title"},"ArcGIS Layer Publisher"),E.default.createElement(m.default,null,E.default.createElement(h.default,null,"Please Enter your Feature Layer URL \n ex:http://x.xx.com/ArcGIS/rest/services/xxx/xx/MapServer/0"),n&&E.default.createElement(b.default,{className:o.flexGrow,color:"secondary",variant:"subheading"},n),E.default.createElement(v.default,{autoFocus:!0,value:t,onChange:this.handleLayerURLChange,margin:"dense",id:"name",label:"Layer URL",fullWidth:!0,required:!0,error:!(!t||S.default.isURL(t))})),E.default.createElement(p.default,null,a&&E.default.createElement(c.default,{className:o.progress,thickness:7}),E.default.createElement(d.default,{disabled:a,onClick:u,color:"primary"},"Cancel"),E.default.createElement(d.default,{disabled:!t||a||!(!t||S.default.isURL(t)),onClick:this.startPublish,color:"primary"},"Publish")))}}]),t}(E.default.Component);M.propTypes={classes:y.default.object.isRequired,handleArcGISModal:y.default.func.isRequired,ArcGISModalOpen:y.default.bool.isRequired,token:y.default.string.isRequired,urls:y.default.object.isRequired,username:y.default.string.isRequired};t.default=(0,L.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls}},function(e){return{}})((0,_.withStyles)(function(e){return{flexGrow:{flexGrow:1},progress:{margin:2*e.spacing.unit}}})(M))},swsI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=M(a("Yz+Y")),l=M(a("iCc5")),r=M(a("V7oC")),u=M(a("FYw3")),o=M(a("mRg0")),i=M(a("YEIV")),s=a("vu7d"),d=M(a("1OZW")),c=M(a("DKSo")),f=M(a("ciEP")),p=M(a("JgXy")),m=M(a("NABS")),h=M(a("4eE1")),g=M(a("WqRt")),y=M(a("pPbJ")),E=M(a("17x9")),v=M(a("q1tI")),b=M(a("nwgO")),L=M(a("6ZaM")),S=M(a("TSYQ")),_=a("/MKj"),w=a("SUMQ");function M(e){return e&&e.__esModule?e:{default:e}}var O=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.loadSchema=function(){var e=a.props,t=e.urls,n=e.layer,l=e.currentLayer,r=t.compareLayerURL(l.upload_id,l.name,n.alternate);a.requests.doGet(r).then(function(e){e.error_message?a.setState({schemaLoading:!1,schema:null},alert(e.error_message)):a.setState({schema:e,schemaLoading:!1,expand:!0})}).catch(function(e){this.setState({schemaLoading:!1,schema:null},alert(e.message))}.bind(a))},a.compareSchema=function(){var e=a.state,t=e.schema,n=e.expand;t?a.setState({expand:!n}):a.setState({schemaLoading:!0,expand:!1},a.loadSchema)},a.reloadLayer=function(){var e=a.props,t=e.urls,n=e.layer,l=e.currentLayer,r=t.reloadURL(l.upload_id,l.name,n.alternate);a.requests.doGet(r).then(function(e){e.error_message?a.setState({reloadLayerLoading:!1},alert(e.error_message)):a.setState({reloadLayerLoading:!1},function(){return alert(e.status)})}).catch(function(e){this.setState({reloadLayerLoading:!1},alert(e.message))}.bind(a))},a.startReloadLayer=function(){a.setState({reloadLayerLoading:!0},a.reloadLayer)},a.replaceLayer=function(){var e=a.props,t=e.layer,n=e.currentLayer.urls.publish_url+"?replace=true&publish_name="+t.alternate.split(":").pop();a.requests.doGet(n).then(function(e){e.error_message?a.setState({replaceLayerLoading:!1},alert(e.error_message)):a.setState({replaceLayerLoading:!1},function(){return window.location.href=e.layer_url})}).catch(function(e){this.setState({replaceLayerLoading:!1},alert(e.message))}.bind(a))},a.startReplaceLayer=function(){a.setState({replaceLayerLoading:!0},a.replaceLayer)},a.state={schema:null,schemaLoading:null,reloadLayerLoading:!1,replaceLayerLoading:!1,expand:!1};var r=a.props,o=r.token,i=r.username,d=o.split(" for ")[0];return a.requests=new s.ApiRequests(i,d),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.layer,a=e.classes,n=this.state,l=n.schema,r=n.schemaLoading,u=n.expand,o=n.reloadLayerLoading,i=n.replaceLayerLoading;return v.default.createElement(y.default,{key:t.id,className:a.layerItem,elevation:2},v.default.createElement("div",{className:a.layerItemActions},v.default.createElement(L.default,{noWrap:!0,className:(0,S.default)(a.flexGrow,a.button),variant:"subheading"},t.title),r&&v.default.createElement(c.default,{className:a.progress,thickness:5}),o&&v.default.createElement(c.default,{color:"default",className:a.progress,thickness:5}),i&&v.default.createElement(c.default,{color:"secondary",className:a.progress,thickness:5}),v.default.createElement(b.default,{title:"Comapare The Schema of this Layer With the Target Layer and return the result"},v.default.createElement(d.default,{onClick:this.compareSchema,variant:"outlined",color:"primary",className:a.button},"Compare Schema")),v.default.createElement(b.default,{title:"Delete Recent Data, Style and Metadata and It With the New One"},v.default.createElement(d.default,{onClick:this.startReplaceLayer,variant:"outlined",color:"secondary",className:a.button},"Replace")),v.default.createElement(b.default,{title:"Replace The Current Data Only but Keep the style and metadata"},v.default.createElement(d.default,{onClick:this.startReloadLayer,variant:"outlined",color:"default",className:a.button},"Update(DB Table Replacement)"))),v.default.createElement(f.default,{in:u,timeout:"auto",unmountOnExit:!0},v.default.createElement("div",{className:a.content},v.default.createElement("div",{className:a.textCenter},!r&&l&&v.default.createElement(L.default,{color:l.compatible?"primary":"secondary",noWrap:!0,className:(0,S.default)(a.flexGrow,a.button),variant:"title"},"Layer Schema is "+(l.compatible?"Compatible":"Incompatible"))),v.default.createElement("div",{className:a.schemaFields},!r&&l&&l.new_fields.length>0&&v.default.createElement(p.default,{component:"nav",subheader:v.default.createElement(g.default,{component:"div"},"New Fields")},l.new_fields.map(function(e,t){return v.default.createElement(m.default,{key:t},v.default.createElement(h.default,{inset:!0,primary:"Field: "+e[0],secondary:"Type: "+e[1]}))})),!r&&l&&l.deleted_fields.length>0&&v.default.createElement(p.default,{component:"nav",subheader:v.default.createElement(g.default,{component:"div"},"Deleted Fields")},l.deleted_fields.map(function(e,t){return v.default.createElement(m.default,{key:t},v.default.createElement(h.default,{inset:!0,primary:"Field: "+e[0],secondary:"Type: "+e[1]}))}))))))}}]),t}(v.default.Component);O.propTypes={classes:E.default.object.isRequired,token:E.default.string.isRequired,urls:E.default.object.isRequired,username:E.default.string.isRequired,layer:E.default.object.isRequired,currentLayer:E.default.object.isRequired};t.default=(0,_.connect)(function(e){return{username:e.username,token:e.token,urls:e.urls}},function(e){return{}})((0,w.withStyles)(function(e){var t;return{flexGrow:{flexGrow:1},button:{margin:e.spacing.unit},progress:{margin:2*e.spacing.unit},layerItem:{margin:2*e.spacing.unit,display:"flex",flexDirection:"column"},layerItemActions:(t={display:"flex"},(0,i.default)(t,e.breakpoints.down("sm"),{flexDirection:"column"}),(0,i.default)(t,"alignItems","center"),(0,i.default)(t,"justifyContent","space-between"),t),content:{padding:e.spacing.unit},schemaFields:{display:"flex",justifyContent:"space-around"},textCenter:{textAlign:"center"}}})(O))},tF6y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addUpload=function(e){return{type:n.ADD_UPLOAD,payload:e}},t.addUploads=function(e){return{type:n.ADD_UPLOADS,payload:e}},t.deleteUpload=function(e){return{type:n.DELETE_UPLOAD,payload:e}},t.deleteUploads=function(e){return{type:n.DELETE_UPLOADS,payload:e}},t.newUploads=function(e){return{type:n.SET_UPLOADS,payload:e}},t.uploadsLoading=function(e){return{type:n.UPLOADS_LOADING,payload:e}},t.uploadsTotalCount=function(e){return{type:n.SET_TOTAL_COUNT,payload:e}};var n=a("TUL1")},uctU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a("Yz+Y")),l=E(a("iCc5")),r=E(a("V7oC")),u=E(a("FYw3")),o=E(a("mRg0"));a("1LhQ");var i=E(a("YDiY")),s=E(a("oYDv")),d=E(a("1OZW")),c=E(a("M1tY")),f=E(a("17x9")),p=E(a("q1tI")),m=E(a("2VVu")),h=E(a("nwgO")),g=E(a("6ZaM")),y=a("SUMQ");function E(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,a,r,o;(0,l.default)(this,t);for(var i=arguments.length,s=Array(i),d=0;d<i;d++)s[d]=arguments[d];return a=r=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),r.state={downloadModalOpen:!1,ArcGISModalOpen:!1},r.handleArcGISModal=function(){var e=r.state.ArcGISModalOpen;r.setState({ArcGISModalOpen:!e})},r.handleDownloadModal=function(){var e=r.state.downloadModalOpen;r.setState({downloadModalOpen:!e})},o=a,(0,u.default)(r,o)}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.state,t=e.downloadModalOpen,a=e.ArcGISModalOpen,n=this.props,l=n.classes,r=n.title;return p.default.createElement("div",{className:l.root},p.default.createElement(i.default,{position:"static"},p.default.createElement(m.default,null,p.default.createElement(g.default,{variant:"title",color:"inherit",className:l.flex},r),p.default.createElement(h.default,{title:"Import GeoPackage, Shapefile, CSV, Raster or KML"},p.default.createElement(d.default,{classes:{label:l.capitalize},onClick:this.handleArcGISModal,color:"inherit"},"Upload Shapefile")),p.default.createElement(d.default,{classes:{label:l.capitalize},onClick:this.handleArcGISModal,color:"inherit"},"ArcGIS Publisher"),p.default.createElement(d.default,{classes:{label:l.capitalize},onClick:this.handleDownloadModal,color:"inherit"},"Download"))),p.default.createElement(s.default,{handleArcGISModal:this.handleArcGISModal,ArcGISModalOpen:a}),p.default.createElement(c.default,{handleDownloadModal:this.handleDownloadModal,downloadModalOpen:t}))}}]),t}(p.default.Component);v.propTypes={classes:f.default.object.isRequired,title:f.default.string.isRequired},t.default=(0,y.withStyles)({root:{flexGrow:1},flex:{flexGrow:1},capitalize:{textTransform:"capitalize"}})(v)},vu7d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiRequests=void 0;var n=u(a("QbLZ")),l=u(a("iCc5")),r=u(a("V7oC"));function u(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log("Progress is ----\x3e "+t)}}function i(e){console.log("The transfer is complete.")}function s(e){console.error("An error occurred while transferring the file.")}t.convertToSlug=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^\w-]+/g,"")},t.checkPermission=function(e,t,a){if(e[t].ids.indexOf(a)>-1)return!0;return!1};t.ApiRequests=function(){function e(t,a){(0,l.default)(this,e),this.token=a,this.username=t}return(0,r.default)(e,[{key:"doPost",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,{method:"POST",credentials:"include",headers:new Headers((0,n.default)({Authorization:"ApiKey "+this.username+":"+this.token},a)),body:t}).then(function(e){return e.json()})}},{key:"doDelete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"DELETE",credentials:"include",headers:(0,n.default)({Authorization:"ApiKey "+this.username+":"+this.token},t)}).then(function(e){return e.text()})}},{key:"doGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"GET",credentials:"include",headers:(0,n.default)({Authorization:"ApiKey "+this.username+":"+this.token},t)}).then(function(e){return e.json()})}},{key:"uploadWithProgress",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s,u=new XMLHttpRequest;u.upload.addEventListener("progress",function(e){n(e)},!1),u.addEventListener("load",function(e){l(u)}),u.addEventListener("error",function(){r(u)}),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&a(u.responseText)},u.open("POST",e,!0),u.setRequestHeader("Cache-Control","no-cache"),u.setRequestHeader("Authorization","ApiKey "+this.username+":"+this.token),u.send(t)}}]),e}()}})});
//# sourceMappingURL=/static/data_manager/dist/sourcemaps/../GeopackageManager.bundle.js.map
//# sourceMappingURL=GeopackageManager.bundle.js.map